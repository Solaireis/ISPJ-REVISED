<!-- Left -->
<div class="w-68 xs:w-88 xl:w-275 h-screen">
    <div class="flex flex-col h-full border-r border-1 xl:pr-3 fixed overflow-y-auto w-68 xs:w-88 xl:w-275">
        <!-- Logo -->
        <a class="flex my-2 justify-center xl:justify-start" href="/">
            <img src="{{ url_for('static', path='img/logo.webp') }}" alt="Mirai Logo" class="object-cover h-10 w-30 xl:block hidden">
        </a>
        <!-- /Logo -->
        <!-- Nav -->
        <nav class="mt-5 text-gray-600">
            <a href="/" class="flex items-center justify-center xl:justify-start mb-8 transition duration-350 ease-in-out hover:text-main-100">
                <svg fill="currentColor" viewBox="0 0 24 24" class="h-6 w-6">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M22.58 7.35L12.475 1.897c-.297-.16-.654-.16-.95 0L1.425 7.35c-.486.264-.667.87-.405 1.356.18.335.525.525.88.525.16 0 .324-.038.475-.12l.734-.396 1.59 11.25c.216 1.214 1.31 2.062 2.66 2.062h9.282c1.35 0 2.444-.848 2.662-2.088l1.588-11.225.737.398c.485.263 1.092.082 1.354-.404.263-.486.08-1.093-.404-1.355zM12 15.435c-1.795 0-3.25-1.455-3.25-3.25s1.455-3.25 3.25-3.25 3.25 1.455 3.25 3.25-1.455 3.25-3.25 3.25z"></path>
                </svg>
                <span class="hidden xl:block ml-4 font-bold text-md">Home</span>
            </a>
            {% if request.session.get(SESSION_COOKIE) %}
                <a href="{{ url_for('notifications') }}" class="flex items-center justify-center xl:justify-start mb-8 transition duration-350 ease-in-out hover:text-main-100">
                    <div class="relative">
                        <svg fill="currentColor" viewBox="0 0 24 24" class="h-6 w-6">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21.697 16.468c-.02-.016-2.14-1.64-2.103-6.03.02-2.532-.812-4.782-2.347-6.335C15.872 2.71 14.01 1.94 12.005 1.93h-.013c-2.004.01-3.866.78-5.242 2.174-1.534 1.553-2.368 3.802-2.346 6.334.037 4.33-2.02 5.967-2.102 6.03-.26.193-.366.53-.265.838.102.308.39.515.712.515h4.92c.102 2.31 1.997 4.16 4.33 4.16s4.226-1.85 4.327-4.16h4.922c.322 0 .61-.206.71-.514.103-.307-.003-.645-.263-.838zM12 20.478c-1.505 0-2.73-1.177-2.828-2.658h5.656c-.1 1.48-1.323 2.66-2.828 2.66zM4.38 16.32c.74-1.132 1.548-3.028 1.524-5.896-.018-2.16.644-3.982 1.913-5.267C8.91 4.05 10.397 3.437 12 3.43c1.603.008 3.087.62 4.18 1.728 1.27 1.285 1.933 3.106 1.915 5.267-.024 2.868.785 4.765 1.525 5.896H4.38z"></path>
                        </svg>
                        {% if user.notifications_count != "0" %}
                            <span class="absolute top-0 right-0 inline-flex items-center py-0.5 px-1.5 rounded-full text-xs font-medium transform -translate-y-1/2 translate-x-1/2 bg-main-100 text-white">{{ user.notifications_count }}</span>
                        {% endif %}
                    </div>
                    <span class="hidden xl:block ml-4 font-bold text-md">Notifications</span>
                </a>
                <a href="{{ url_for('chat') }}" class="flex items-center justify-center xl:justify-start hover:text-main-100 mb-8 transition duration-350 ease-in-out">
                    <svg fill="currentColor" viewBox="0 0 24 24" class="h-6 w-6">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.25 3.018H4.75C3.233 3.018 2 4.252 2 5.77v12.495c0 1.518 1.233 2.753 2.75 2.753h14.5c1.517 0 2.75-1.235 2.75-2.753V5.77c0-1.518-1.233-2.752-2.75-2.752zm-14.5 1.5h14.5c.69 0 1.25.56 1.25 1.25v.714l-8.05 5.367c-.273.18-.626.182-.9-.002L3.5 6.482v-.714c0-.69.56-1.25 1.25-1.25zm14.5 14.998H4.75c-.69 0-1.25-.56-1.25-1.25V8.24l7.24 4.83c.383.256.822.384 1.26.384.44 0 .877-.128 1.26-.383l7.24-4.83v10.022c0 .69-.56 1.25-1.25 1.25z"></path>
                    </svg>
                    <span class="hidden xl:block ml-4 font-bold text-md">Messages</span>
                </a>
                <a href="{{ url_for('profile', username=user.username) }}" class="flex items-center justify-center xl:justify-start hover:text-main-100 mb-8 transition duration-350 ease-in-out">
                    <svg fill="currentColor" viewBox="0 0 24 24" class="h-6 w-6">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11.816c1.355 0 2.872-.15 3.84-1.256.814-.93 1.078-2.368.806-4.392-.38-2.825-2.117-4.512-4.646-4.512S7.734 3.343 7.354 6.17c-.272 2.022-.008 3.46.806 4.39.968 1.107 2.485 1.256 3.84 1.256zM8.84 6.368c.162-1.2.787-3.212 3.16-3.212s2.998 2.013 3.16 3.212c.207 1.55.057 2.627-.45 3.205-.455.52-1.266.743-2.71.743s-2.255-.223-2.71-.743c-.507-.578-.657-1.656-.45-3.205zm11.44 12.868c-.877-3.526-4.282-5.99-8.28-5.99s-7.403 2.464-8.28 5.99c-.172.692-.028 1.4.395 1.94.408.52 1.04.82 1.733.82h12.304c.693 0 1.325-.3 1.733-.82.424-.54.567-1.247.394-1.94zm-1.576 1.016c-.126.16-.316.246-.552.246H5.848c-.235 0-.426-.085-.552-.246-.137-.174-.18-.412-.12-.654.71-2.855 3.517-4.85 6.824-4.85s6.114 1.994 6.824 4.85c.06.242.017.48-.12.654z"></path>
                    </svg>
                    <span class="hidden xl:block ml-4 font-bold text-md">Profile</span>
                </a>
                <div class="mx-auto w-11 h-11 xl:w-auto flex items-center justify-center mb-10">
                    <button class="w-full text-center btn-main py-3 rounded-full font-bold font-sm transition duration-350 ease-in-out " data-hs-overlay="#uploadPostModal">
                        <svg fill="currentColor" viewBox="0 0 24 24" class="block xl:hidden h-6 w-6 mx-auto">
                            <path d="M8.8 7.2H5.6V3.9c0-.4-.3-.8-.8-.8s-.7.4-.7.8v3.3H.8c-.4 0-.8.3-.8.8s.3.8.8.8h3.3v3.3c0 .4.3.8.8.8s.8-.3.8-.8V8.7H9c.4 0 .8-.3.8-.8s-.5-.7-1-.7zm15-4.9v-.1h-.1c-.1 0-9.2 1.2-14.4 11.7-3.8 7.6-3.6 9.9-3.3 9.9.3.1 3.4-6.5 6.7-9.2 5.2-1.1 6.6-3.6 6.6-3.6s-1.5.2-2.1.2c-.8 0-1.4-.2-1.7-.3 1.3-1.2 2.4-1.5 3.5-1.7.9-.2 1.8-.4 3-1.2 2.2-1.6 1.9-5.5 1.8-5.7z"></path>
                        </svg>
                        <span class="hidden xl:block font-bold text-md">Post</span>
                    </button>
                </div>
            {% else %}
                <a href="{{ url_for('login') }}" class="mx-auto w-11 h-11 xl:w-auto flex items-center justify-center btn-main py-3 rounded-full font-bold font-sm transition duration-350 ease-in-out mb-10">
                    <!-- Make an svg for -->
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 499.1 499.1" xml:space="preserve" class="block xl:hidden h-6 w-6" fill="currentColor">
                        <path d="M0,249.6c0,9.5,7.7,17.2,17.2,17.2h327.6l-63.9,63.8c-6.7,6.7-6.7,17.6,0,24.3c3.3,3.3,7.7,5,12.1,5s8.8-1.7,12.1-5 l93.1-93.1c6.7-6.7,6.7-17.6,0-24.3l-93.1-93.1c-6.7-6.7-17.6-6.7-24.3,0c-6.7,6.7-6.7,17.6,0,24.3l63.8,63.8H17.2 C7.7,232.5,0,240.1,0,249.6z"/>
                        <path d="M396.4,494.2c56.7,0,102.7-46.1,102.7-102.8V107.7C499.1,51,453,4.9,396.4,4.9H112.7C56,4.9,10,51,10,107.7V166 c0,9.5,7.7,17.1,17.1,17.1c9.5,0,17.2-7.7,17.2-17.1v-58.3c0-37.7,30.7-68.5,68.4-68.5h283.7c37.7,0,68.4,30.7,68.4,68.5v283.7 c0,37.7-30.7,68.5-68.4,68.5H112.7c-37.7,0-68.4-30.7-68.4-68.5v-57.6c0-9.5-7.7-17.2-17.2-17.2S10,324.3,10,333.8v57.6 c0,56.7,46.1,102.8,102.7,102.8H396.4L396.4,494.2z"/>
                    </svg>
                    <span class="hidden xl:block font-bold text-md">Login</span>
                </a>
            {% endif %}
        </nav>
        <!-- /Nav -->
        <!-- User Menu -->
        {% if request.session.get(SESSION_COOKIE) %}
            <button class="w-14 xl:w-full mx-auto mt-auto flex flex-row justify-between mb-5 rounded-full hover:bg-pink-100 p-2 cursor-pointer transition duration-350 ease-in-out mb-2" data-dropdown-toggle="profileDropdown">
                <div class="flex flex-row">
                    <img class="w-10 h-10 rounded-full user-profile-img" src="{{ user.profile_image }}" alt="@{{ user.username }} profile picture" referrerpolicy="no-referrer">
                    <div class="hidden xl:block flex flex-col ml-2 text-truncate]">
                        <h1 class="text-gray-800 font-bold text-sm">{{ truncate_text(user.display_name, 22) }}</h1>
                        <p class="text-gray-400 text-sm">@{{ truncate_text(user.username, 20) }}</p>
                    </div>
                </div>
                <div class="hidden xl:block">
                    <div class="flex items-center h-full text-gray-800">
                        <span class="sr-only">Open profile dropdown</span>
                        <svg class="h-4 w-4 mr-2" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"></path>
                        </svg>
                    </div>
                </div>
            </button>
        {% endif %}
        <!-- /User Menu -->
    </div>
</div>

{% if request.session.get(SESSION_COOKIE) %}
    <div id="profileDropdown" class="z-[999] hidden text-base list-none bg-white divide-y divide-gray-100 rounded shadow w-44 border-gray-300 border-2">
        <ul class="py-1" aria-labelledby="profileDropdownButton">
            <li>
                <a href="{{ url_for('settings') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 ">Account Settings</a>
            </li>
            <li>
                <a href="{{ url_for('logout') }}" class="block px-4 py-2 text-sm text-red-600 hover:bg-gray-100">Logout</a>
            </li>
        </ul>
    </div>

    <!-- POST MODAL -->
    <div id="uploadPostModal" class="hs-overlay hidden w-full h-full fixed top-0 left-0 z-[60] overflow-x-hidden overflow-y-auto [--overlay-backdrop:static]">
        <div class="hs-overlay-open:mt-7 hs-overlay-open:opacity-100 hs-overlay-open:duration-500 mt-14 opacity-0 ease-out transition-all sm:max-w-lg sm:w-full m-3 sm:mx-auto">
            <div class="flex flex-col bg-white border shadow-sm rounded-xl   /[.7]">
                <div class="flex justify-between items-center py-3 px-4 border-b ">
                    <h3 class="font-bold text-gray-800 "> Upload </h3>
                    <button type="button" class="hs-dropup-toggle inline-flex flex-shrink-0 justify-center items-center h-8 w-8 rounded-md text-gray-500 hover:text-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 focus:ring-offset-white transition-all text-sm  " data-hs-overlay="#uploadPostModal">
                        <span class="sr-only">Close</span>
                        <svg class="w-3.5 h-3.5" width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0.258206 1.00652C0.351976 0.912791 0.479126 0.860131 0.611706 0.860131C0.744296 0.860131 0.871447 0.912791 0.965207 1.00652L3.61171 3.65302L6.25822 1.00652C6.30432 0.958771 6.35952 0.920671 6.42052 0.894471C6.48152 0.868271 6.54712 0.854471 6.61352 0.853901C6.67992 0.853321 6.74572 0.865971 6.80722 0.891111C6.86862 0.916251 6.92442 0.953381 6.97142 1.00032C7.01832 1.04727 7.05552 1.1031 7.08062 1.16454C7.10572 1.22599 7.11842 1.29183 7.11782 1.35822C7.11722 1.42461 7.10342 1.49022 7.07722 1.55122C7.05102 1.61222 7.01292 1.6674 6.96522 1.71352L4.31871 4.36002L6.96522 7.00648C7.05632 7.10078 7.10672 7.22708 7.10552 7.35818C7.10442 7.48928 7.05182 7.61468 6.95912 7.70738C6.86642 7.80018 6.74102 7.85268 6.60992 7.85388C6.47882 7.85498 6.35252 7.80458 6.25822 7.71348L3.61171 5.06702L0.965207 7.71348C0.870907 7.80458 0.744606 7.85498 0.613506 7.85388C0.482406 7.85268 0.357007 7.80018 0.264297 7.70738C0.171597 7.61468 0.119017 7.48928 0.117877 7.35818C0.116737 7.22708 0.167126 7.10078 0.258206 7.00648L2.90471 4.36002L0.258206 1.71352C0.164476 1.61976 0.111816 1.4926 0.111816 1.36002C0.111816 1.22744 0.164476 1.10028 0.258206 1.00652Z" fill="currentColor" />
                        </svg>
                    </button>
                </div>
                <form id="uploadPostForm">
                    <div class="flex flex-shrink-0 p-4 pb-0">
                        <a href="{{ url_for('profile', username=user.username) }}" class="w-12 flex items-top">
                            <img class="inline-block h-10 w-10 rounded-full user-profile-img" src="{{ user.profile_image }}" alt="@{{ user.username }} profile picture" referrerpolicy="no-referrer">
                        </a>
                        <div class="w-full p-2">
                            <textarea id="postDescription" class="text-gray-900 placeholder-gray-400 w-full h-10 bg-transparent border-0 focus:outline-none resize-none" placeholder="What's happening?" maxlength="{{ get_post_max_length(user) }}"></textarea>
                        </div>
                    </div>
                    <div class="hidden mx-5" id="fileInputContainerSidebar">
                        <input type="file" class="filepond" id="fileUploadInputPost" name="file">
                    </div>
                    <div class="w-full flex items-top p-2 text-white pl-14">
                        <button type="button" id="imageBtnSidebar" class="text-main-500 hover:bg-pink-100 rounded-full p-2">
                            <svg viewBox="0 0 24 24" class="w-5 h-5" fill="currentColor">
                                <g>
                                    <path d="M19.75 2H4.25C3.01 2 2 3.01 2 4.25v15.5C2 20.99 3.01 22 4.25 22h15.5c1.24 0 2.25-1.01 2.25-2.25V4.25C22 3.01 20.99 2 19.75 2zM4.25 3.5h15.5c.413 0 .75.337.75.75v9.676l-3.858-3.858c-.14-.14-.33-.22-.53-.22h-.003c-.2 0-.393.08-.532.224l-4.317 4.384-1.813-1.806c-.14-.14-.33-.22-.53-.22-.193-.03-.395.08-.535.227L3.5 17.642V4.25c0-.413.337-.75.75-.75zm-.744 16.28l5.418-5.534 6.282 6.254H4.25c-.402 0-.727-.322-.744-.72zm16.244.72h-2.42l-5.007-4.987 3.792-3.85 4.385 4.384v3.703c0 .413-.337.75-.75.75z"></path>
                                    <circle cx="8.868" cy="8.309" r="1.542"></circle>
                                </g>
                            </svg>
                        </button>
                        <div ></div>
                        <button type="button" id="emojiBtnSidebar" class="text-main-500 hover:bg-pink-100 rounded-full p-2">
                            <svg viewBox="0 0 24 24" class="w-5 h-5" fill="currentColor">
                                <g>
                                    <path d="M12 22.75C6.072 22.75 1.25 17.928 1.25 12S6.072 1.25 12 1.25 22.75 6.072 22.75 12 17.928 22.75 12 22.75zm0-20C6.9 2.75 2.75 6.9 2.75 12S6.9 21.25 12 21.25s9.25-4.15 9.25-9.25S17.1 2.75 12 2.75z"></path>
                                    <path d="M12 17.115c-1.892 0-3.633-.95-4.656-2.544-.224-.348-.123-.81.226-1.035.348-.226.812-.124 1.036.226.747 1.162 2.016 1.855 3.395 1.855s2.648-.693 3.396-1.854c.224-.35.688-.45 1.036-.225.35.224.45.688.226 1.036-1.025 1.594-2.766 2.545-4.658 2.545z"></path>
                                    <circle cx="14.738" cy="9.458" r="1.478"></circle>
                                    <circle cx="9.262" cy="9.458" r="1.478"></circle>
                                </g>
                            </svg>
                        </button>
                        <button type="submit" id="postSBSubmitBtn" class="btn-main rounded-full py-1 px-4 ml-auto mr-1">
                            <span class="font-bold text-sm">Post</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endif %}
<!-- /Left -->